name: Node.js Jest tests

on:
	push:
		branches: ['main']
	pull_request:
		branches: ['main']

jobs:
	build:
		runs-on: ubuntu-latest
		strategy:
			matrix:
				node-version: [16.x]
			steps:
				- uses: actions/checkout@v3
				- name: Use Node.js ${{ matrix.node-version }}
				  uses: actions/setup-node@v3
				  with:
					node-version: ${{ matrix.node-version }}
					cache: 'npm'
				- run: npm ci
				- name: Jest Github Action
				  uses: willcaul/jest-github-action@v2
				  with:
					test-command: npm run test:ci
				  env:
					GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
				- name: ESlint Github Action
				  uses: sibiraj-s/action-eslint@v2
				  with:
					github-token: ${{ secrets.GITHUB_TOKEN }} # Optional
					eslint-args: '--ignore-path=.gitignore --quiet'
					extensions: 'js,jsx,ts,tsx'
					annotations: true
				- run: npm run dev
